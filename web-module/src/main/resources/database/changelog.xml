<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet id="1" author="portnova.julia@gmail.com">
        <createTable tableName="ROLE">
            <column name="id" type="bigint" autoIncrement="true" incrementBy="1">
                <constraints primaryKey="true"/>
            </column>
            <column name="role_name" type="ENUM ('ADMINISTRATOR','SALE_USER','CUSTOMER_USER','SECURE_REST_API')">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="2" id="portnova.julia@gmail.com">
        <insert tableName="ROLE">
            <column name="role_name" value="ADMINISTRATOR"/>
        </insert>
        <insert tableName="ROLE">
            <column name="role_name" value="CUSTOMER_USER"/>
        </insert>
        <insert tableName="ROLE">
            <column name="role_name" value="SALE_USER"/>
        </insert>
        <insert tableName="ROLE">
            <column name="role_name" value="SECURE_REST_API"/>
        </insert>
    </changeSet>
    <changeSet id="3" author="portnova.julia@gmail.com">
        <createTable tableName="USER">
            <column name="id" type="bigint" autoIncrement="true" incrementBy="1">
                <constraints primaryKey="true"/>
            </column>
            <column name="unique_number" type="varchar(36)">
                <constraints nullable="false"/>
            </column>
            <column name="last_name" type="varchar(40)">
                <constraints nullable="false"/>
            </column>
            <column name="first_name" type="varchar(20)">
                <constraints nullable="false"/>
            </column>
            <column name="middle_name" type="varchar(40)"/>
            <column name="email" type="varchar(50)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="password" type="varchar(100)"/>
            <column name="role_id" type="bigint">
                <constraints foreignKeyName="fk_user_role" references="ROLE(id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="4" author="portnova.julia@gmail.com">
        <insert tableName="USER">
            <column name="unique_number" value="3422b448-2460-4fd2-9183-8000de6f8343"/>
            <column name="last_name" value="AdminLastName"/>
            <column name="first_name" value="AdminFirstName"/>
            <column name="middle_name" value="AdminMiddleName"/>
            <column name="email" value="admin@myhost.com"/>
            <column name="password" value="$2y$12$0fpDrfezgN2rr.K31HAWMu/r8p90sJonQYgeCSAiG1jcmVGjtI4hK"/>
            <column name="role_id" valueComputed="(SELECT id FROM ROLE WHERE role_name='ADMINISTRATOR')"/>
        </insert>
    </changeSet>
    <changeSet id="5" author="portnova.julia@gmail.com">
        <createTable tableName="FEEDBACK">
            <column name="id" type="bigint" autoIncrement="true" incrementBy="1">
                <constraints primaryKey="true"/>
            </column>
            <column name="unique_number" type="varchar(36)">
                <constraints nullable="false"/>
            </column>
            <column name="text" type="varchar(500)">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="timestamp" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="is_displayed" type="TINYINT(1)">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="bigint">
                <constraints foreignKeyName="fk_user_feedback" references="USER(id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="6" author="portnova.julia@gmail.com">
        <insert tableName="FEEDBACK">
            <column name="unique_number" value="29be0ee3-fe77-331e-a1bf-9494ec18c0ba"/>
            <column name="text" value="text of feedback1"/>
            <column name="is_displayed" value="0"/>
            <column name="user_id" valueComputed="(SELECT id FROM USER WHERE email='admin@myhost.com')"/>
        </insert>
        <insert tableName="FEEDBACK">
            <column name="unique_number" value="33b06619-1ee7-3db5-827d-0dc85df1f759"/>
            <column name="text" value="text of feedback2"/>
            <column name="is_displayed" value="0"/>
            <column name="user_id" valueComputed="(SELECT id FROM USER WHERE email='admin@myhost.com')"/>
        </insert>
        <insert tableName="FEEDBACK">
            <column name="unique_number" value="4896c91b-9e61-3129-87b6-8aa299028058"/>
            <column name="text" value="text of feedback3"/>
            <column name="is_displayed" value="0"/>
            <column name="user_id" valueComputed="(SELECT id FROM USER WHERE email='admin@myhost.com')"/>
        </insert>

    </changeSet>
    <changeSet id="7" author="portnova.julia@gmail.com">
        <insert tableName="FEEDBACK">
            <column name="unique_number" value="1cc8a402-aaaa-11eb-bcbc-0242ac130002"/>
            <column name="text" value="text of feedback4"/>
            <column name="is_displayed" value="1"/>
            <column name="user_id" valueComputed="(SELECT id FROM USER WHERE email='admin@myhost.com')"/>
        </insert>
    </changeSet>
</databaseChangeLog>